{% load static %}<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>Mocinno Chat</title>    <link rel="stylesheet" href="{% static 'chat/style.css' %}">    <script defer src="{% static 'chat/script.js' %}"></script></head><body><div class="container">    <!-- 左侧对话列表 -->    <div class="sidebar">        <h3>对话列表</h3>        <ul id="chat-list">            <!-- 动态加载会话标题 -->        </ul>    </div>    <!-- 主聊天窗：Form 1 -->    <div class="main-chat">        <form id="main-chat-form" method="POST">            {% csrf_token %}            <!-- 聊天记录显示区 -->            <div id="chat-window">                <!-- 聊天记录（通过 JS 渲染） -->                <!-- AI 回复（无边框，左对齐） -->                <div class="chat-message ai">                    <div class="chat-bubble">                        <p><strong>AI:</strong></p>                        <p>你好！这是 <code>AI 模拟回复</code>。支持 <strong>Markdown</strong> 渲染。</p>                    </div>                </div>                <!-- 用户提交（右对齐，带边框） -->                <div class="chat-message user">                    <div class="chat-bubble">                        <p>你能解释一下 Django 的模型是什么吗？</p>                    </div>                </div>            </div>            <!-- 模型选择按钮 -->            <div class="toggle-group">                <label><input type="radio" name="model" value="chat"> chat</label>                <label><input type="radio" name="model" value="reasoner" checked>                    reasoner</label>            </div>            <!-- 摘要模式开关 -->            <div class="toggle-group">                <label><input type="checkbox" name="abstract"> 摘要模式</label>            </div>            <!-- 启发按钮 -->            <div class="toggle-group">                <label><input type="checkbox" name="insight"> 启发 </label>            </div>            <!-- 用户输入 -->            <textarea name="user_input" placeholder="请输入内容..." rows="3"></textarea>            <!-- 提交按钮 -->            <button type="submit">提交</button>        </form>    </div>    <!-- Prompt Container -->    <div class="prompt-box">        <h3>Prompt container</h3>        <!-- 可折叠菜单按钮（简单占位） -->        <div style="text-align: right; margin-bottom: 5px;">            <button type="button" id="prompt-edit-btn">☰</button>        </div>        <!-- 单选框（预设与自定义） -->        <form id="prompt-form">            {% for preset in presets %}                <label>                    <input type="radio" name="prompt_option" value="{{ preset.name }}">                    {{ preset.name }}                </label><br>            {% endfor %}            <label><input type="radio" name="prompt_option" value="preset1"> 预设prompt 1</label><br>            <label><input type="radio" name="prompt_option" value="preset2"> 预设prompt 2</label><br>            <label><input type="radio" name="prompt_option" value="preset3"> 预设prompt 3</label><br>            <label><input type="radio" name="prompt_option" value="custom" checked> 自定义prompt</label><br>            <!-- 自定义 prompt 输入框 -->            <textarea name="custom_prompt" placeholder="这里是单选框对应的自定义输入框..." rows="4"></textarea>        </form>    </div></div><script><!--处理prompt preset的显示-->    const promptMap = {        {% for preset in presets %}            "{{ preset.name }}": `{{ preset.content|escapejs }}`,        {% endfor %}    };    const radioButtons = document.querySelectorAll('input[name="prompt_option"]');    const textarea = document.querySelector('textarea[name="custom_prompt"]');    radioButtons.forEach(radio => {        radio.addEventListener('change', () => {            const val = radio.value;            if (val in promptMap) {                textarea.value = promptMap[val];            } else {                textarea.value = '';            }        });    });</script></body></html>